<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <title>Coach Terminal | Data Entry</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        :root { --gold: #D4AF37; --obsidian: #0a0a0a; }
        body { background-color: var(--obsidian); color: #e5e5e5; font-family: 'Inter', sans-serif; }
        .input-luxe { background: rgba(255,255,255,0.05); border: 1px solid rgba(212,175,55,0.3); color: var(--gold); padding: 12px; border-radius: 8px; width: 100%; }
        .section-card { background: rgba(255,255,255,0.02); border: 1px solid rgba(255,255,255,0.05); padding: 25px; border-radius: 1.5rem; margin-bottom: 2rem; }
        label { font-size: 10px; text-transform: uppercase; color: #888; font-weight: bold; margin-bottom: 5px; display: block; }
    </style>
</head>
<body class="p-10">
    <div class="max-w-5xl mx-auto">
        <header class="flex justify-between items-center mb-10">
            <h1 class="text-2xl font-black italic gold-gradient uppercase">Coach<span class="text-white not-italic">Terminal</span></h1>
            <a href="index.html" class="text-[10px] border border-white/20 px-6 py-2 rounded-full uppercase font-bold">Terug naar Dashboard</a>
        </header>

        <form id="proForm" class="space-y-6">
            <div class="section-card grid grid-cols-2 gap-6">
                <div><label>Naam Speler</label><input type="text" id="pName" class="input-luxe" required></div>
                <div><label>Aanwezigheid (%)</label><input type="number" id="pAtt" class="input-luxe" value="100"></div>
                <div><label>Minuten</label><input type="number" id="pMin" class="input-luxe" value="1200"></div>
                <div><label>Geboortejaar</label><input type="number" id="pBirth" class="input-luxe" value="2010"></div>
            </div>

            <div class="section-card grid grid-cols-2 gap-6">
                <div><label>Balcontrole (1-5)</label><input type="range" id="s_bal" min="1" max="5" class="w-full accent-yellow-600"></div>
                <div><label>Tactiek (1-5)</label><input type="range" id="s_tac" min="1" max="5" class="w-full accent-yellow-600"></div>
            </div>

            <div class="section-card">
                <label>Sterktes & Ontwikkelpunten</label>
                <textarea id="pStr" class="input-luxe h-24 mb-4" placeholder="Sterke punten..."></textarea>
                <div class="grid grid-cols-2 gap-4">
                    <input type="text" id="g1" placeholder="Doel 1" class="input-luxe">
                    <input type="text" id="a1" placeholder="Actie 1" class="input-luxe">
                </div>
            </div>

            <div class="flex gap-4">
                <input type="password" id="ghToken" placeholder="GitHub Token" class="input-luxe" required>
                <button type="submit" class="bg-yellow-600 text-black font-black px-12 py-4 rounded uppercase text-xs tracking-widest">Opslaan</button>
            </div>
        </form>
    </div>

    <script>
        document.getElementById('proForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            const pData = {
                id: "p_" + Date.now(),
                bio: { name: document.getElementById('pName').value, birthYear: document.getElementById('pBirth').value, photo: "https://via.placeholder.com/400x600/0a0a0a/D4AF37?text=" + document.getElementById('pName').value },
                obj: { attendance: parseInt(document.getElementById('pAtt').value), minutes: parseInt(document.getElementById('pMin').value) },
                ratings: { bal: document.getElementById('s_bal').value, tac: document.getElementById('s_tac').value },
                pop: { goal1: document.getElementById('g1').value, action1: document.getElementById('a1').value },
                analysis: { strengths: document.getElementById('pStr').value, growthPoints: "Wordt berekend..." },
                stats: { "Techniek": document.getElementById('s_bal').value * 20, "Tactiek": document.getElementById('s_tac').value * 20, "Fysiek": 70, "Mentaal": 70 }
            };

            const token = document.getElementById('ghToken').value;
            const url = `https://api.github.com/repos/playbetter2021/sport-dashboard/contents/data/players.json`;

            try {
                const res = await fetch(url, { headers: { "Authorization": `token ${token}` } });
                const file = await res.json();
                let players = JSON.parse(atob(file.content));
                players.push(pData);
                await fetch(url, {
                    method: "PUT",
                    headers: { "Authorization": `token ${token}` },
                    body: JSON.stringify({ message: "Update", content: btoa(unescape(encodeURIComponent(JSON.stringify(players, null, 2)))), sha: file.sha })
                });
                alert("Opgeslagen!");
            } catch (err) { alert(err.message); }
        });
    </script>
</body>
</html>
